(self.webpackChunk_lowdefy_blocks_antd=self.webpackChunk_lowdefy_blocks_antd||[]).push([[49686],{13833:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PresetColorTypes=t.PresetStatusColorTypes=void 0;var o=n(97892),i=(0,o.tuple)("success","processing","error","default","warning");t.PresetStatusColorTypes=i;var a=(0,o.tuple)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime");t.PresetColorTypes=a},87453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$});var o=n(54581),i=n(86851),a=n(90610),s=n(45459),r=n(34950),u=n(5912),l=n(96174),p=n(17347),c=n(73233),d=n(55092),f=n(88499),m=n(88711),v=n.n(m),h=n(20270),g=n.n(h),y=!("undefined"==typeof window||!window.document||!window.document.createElement);function k(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var M,E,b,T=(M=y,E="undefined"!=typeof window?window:{},b={animationend:k("Animation","AnimationEnd"),transitionend:k("Transition","TransitionEnd")},M&&("AnimationEvent"in E||delete b.animationend.animation,"TransitionEvent"in E||delete b.transitionend.transition),b),C={};if(y){var w=document.createElement("div");C=w.style}var S={};function x(e){if(S[e])return S[e];var t=T[e];if(t)for(var n=Object.keys(t),o=n.length,i=0;i<o;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(t,a)&&a in C)return S[e]=t[a],S[e]}return""}var P=x("animationend"),D=x("transitionend"),Z=!(!P||!D);function A(e,t){return e?"object"===(0,p.Z)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var O="none",N="appear",L="enter",R="leave";const H=function(e){var t=e,n=!!c.forwardRef;function m(e){return!(!e.motionName||!t)}"object"===(0,p.Z)(e)&&(t=e.transitionSupport,n="forwardRef"in e?e.forwardRef:n);var h=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).$cacheEle=null,e.node=null,e.raf=null,e.destroyed=!1,e.deadlineId=null,e.state={status:O,statusActive:!1,newStatus:!1,statusStyle:null},e.onDomUpdate=function(){var t=e.state,n=t.status,o=t.newStatus,i=e.props,a=i.onAppearStart,s=i.onEnterStart,r=i.onLeaveStart,u=i.onAppearActive,l=i.onEnterActive,p=i.onLeaveActive,c=i.motionAppear,d=i.motionEnter,f=i.motionLeave;if(m(e.props)){var v=e.getElement();e.$cacheEle!==v&&(e.removeEventListener(e.$cacheEle),e.addEventListener(v),e.$cacheEle=v),o&&n===N&&c?e.updateStatus(a,null,null,(function(){e.updateActiveStatus(u,N)})):o&&n===L&&d?e.updateStatus(s,null,null,(function(){e.updateActiveStatus(l,L)})):o&&n===R&&f&&e.updateStatus(r,null,null,(function(){e.updateActiveStatus(p,R)}))}},e.onMotionEnd=function(t){if(!t||t.deadline||t.target===e.getElement()){var n=e.state,o=n.status,i=n.statusActive,a=e.props,s=a.onAppearEnd,r=a.onEnterEnd,u=a.onLeaveEnd;o===N&&i?e.updateStatus(s,{status:O},t):o===L&&i?e.updateStatus(r,{status:O},t):o===R&&i&&e.updateStatus(u,{status:O},t)}},e.setNodeRef=function(t){var n=e.props.internalRef;e.node=t,(0,f.mH)(n,t)},e.getElement=function(){try{return(0,d.Z)(e.node||(0,r.Z)(e))}catch(t){return e.$cacheEle}},e.addEventListener=function(t){t&&(t.addEventListener(D,e.onMotionEnd),t.addEventListener(P,e.onMotionEnd))},e.removeEventListener=function(t){t&&(t.removeEventListener(D,e.onMotionEnd),t.removeEventListener(P,e.onMotionEnd))},e.updateStatus=function(t,n,o,a){var s,r=t?t(e.getElement(),o):null;!1===r||e.destroyed||(a&&(s=function(){e.nextFrame(a)}),e.setState((0,i.Z)({statusStyle:"object"===(0,p.Z)(r)?r:null,newStatus:!1},n),s))},e.updateActiveStatus=function(t,n){e.nextFrame((function(){if(e.state.status===n){var o=e.props.motionDeadline;e.updateStatus(t,{statusActive:!0}),o>0&&(e.deadlineId=setTimeout((function(){e.onMotionEnd({deadline:!0})}),o))}}))},e.nextFrame=function(t){e.cancelNextFrame(),e.raf=g()(t)},e.cancelNextFrame=function(){e.raf&&(g().cancel(e.raf),e.raf=null)},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.onDomUpdate()}},{key:"componentDidUpdate",value:function(){this.onDomUpdate()}},{key:"componentWillUnmount",value:function(){this.destroyed=!0,this.removeEventListener(this.$cacheEle),this.cancelNextFrame(),clearTimeout(this.deadlineId)}},{key:"render",value:function(){var e,t=this.state,n=t.status,a=t.statusActive,s=t.statusStyle,r=this.props,u=r.children,l=r.motionName,p=r.visible,c=r.removeOnLeave,d=r.leavedClassName,f=r.eventProps;return u?n!==O&&m(this.props)?u((0,i.Z)((0,i.Z)({},f),{},{className:v()(A(l,n),(e={},(0,o.Z)(e,A(l,"".concat(n,"-active")),a),(0,o.Z)(e,l,"string"==typeof l),e)),style:s}),this.setNodeRef):p?u((0,i.Z)({},f),this.setNodeRef):c?null:u((0,i.Z)((0,i.Z)({},f),{},{className:d}),this.setNodeRef):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,o=t.status;if(!m(e))return{};var i=e.visible,a=e.motionAppear,s=e.motionEnter,r=e.motionLeave,u=e.motionLeaveImmediately,l={prevProps:e};return(o===N&&!a||o===L&&!s||o===R&&!r)&&(l.status=O,l.statusActive=!1,l.newStatus=!1),!n&&i&&a&&(l.status=N,l.statusActive=!1,l.newStatus=!0),n&&!n.visible&&i&&s&&(l.status=L,l.statusActive=!1,l.newStatus=!0),(n&&n.visible&&!i&&r||!n&&u&&!i&&r)&&(l.status=R,l.statusActive=!1,l.newStatus=!0),l}}]),n}(c.Component);return h.defaultProps={visible:!0,motionEnter:!0,motionAppear:!0,motionLeave:!0,removeOnLeave:!0},n?c.forwardRef((function(e,t){return c.createElement(h,Object.assign({internalRef:t},e))})):h}(Z);var F=n(53322),V="add",j="keep",I="remove",U="removed";function B(e){var t;return t=e&&"object"===(0,p.Z)(e)&&"key"in e?e:{key:e},(0,i.Z)((0,i.Z)({},t),{},{key:String(t.key)})}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(B)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],o=0,a=t.length,s=W(e),r=W(t);s.forEach((function(e){for(var t=!1,s=o;s<a;s+=1){var u=r[s];if(u.key===e.key){o<s&&(n=n.concat(r.slice(o,s).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{status:V})}))),o=s),n.push((0,i.Z)((0,i.Z)({},u),{},{status:j})),o+=1,t=!0;break}}t||n.push((0,i.Z)((0,i.Z)({},e),{},{status:I}))})),o<a&&(n=n.concat(r.slice(o).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{status:V})}))));var u={};n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1}));var l=Object.keys(u).filter((function(e){return u[e]>1}));return l.forEach((function(e){(n=n.filter((function(t){var n=t.key,o=t.status;return n!==e||o!==I}))).forEach((function(t){t.key===e&&(t.status=j)}))})),n}var z=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=function(n){(0,u.Z)(r,n);var o=(0,l.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=o.apply(this,arguments)).state={keyEntities:[]},e.removeKey=function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:(0,i.Z)((0,i.Z)({},e),{},{status:U})}))}}))},e}return(0,s.Z)(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,o=this.props,i=o.component,a=o.children,s=(0,F.Z)(o,["component","children"]),r=i||c.Fragment,u={};return z.forEach((function(e){u[e]=s[e],delete s[e]})),delete s.keys,c.createElement(r,Object.assign({},s),n.map((function(n){var o=n.status,i=(0,F.Z)(n,["status"]),s=o===V||o===j;return c.createElement(t,Object.assign({},u,{key:i.key,visible:s,eventProps:i,onLeaveEnd:function(){u.onLeaveEnd&&u.onLeaveEnd.apply(u,arguments),e.removeKey(i.key)}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(t,n){var o=t.keys,a=n.keyEntities,s=W(o);if(!e)return{keyEntities:s.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{status:j})}))};var r=_(a,s),u=a.length;return{keyEntities:r.filter((function(e){for(var t=null,n=0;n<u;n+=1){var o=a[n];if(o.key===e.key){t=o;break}}return!t||t.status!==U||e.status!==I}))}}}]),r}(c.Component);n.defaultProps={component:"div"}}(Z);const $=H},97275:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var o=n(86851),i=n(90610),a=n(45459),s=n(34950),r=n(5912),u=n(96174),l=n(73233),p=n.n(l),c=n(90711),d=n.n(c),f=n(26157),m=n(55092),v=n(88499),h=n(97749),g=n(51172),y=n(88711),k=n.n(y);function M(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var E=n(53322),b=n(20270),T=n.n(b),C=n(81675),w=n(87453),S=l.forwardRef((function(e,t){var n=e.prefixCls,o=e.className,i=e.style,a=e.children,s=e.onMouseEnter,r=e.onMouseLeave,u=e.onMouseDown,p=e.onTouchStart,c=a;return l.Children.count(a)>1&&(c=l.createElement("div",{className:"".concat(n,"-content")},a)),l.createElement("div",{ref:t,className:o,onMouseEnter:s,onMouseLeave:r,onMouseDown:u,onTouchStart:p,style:i},c)}));S.displayName="PopupInner";const x=S;function P(e){var t=e.prefixCls,n=e.motion,o=e.animation,i=e.transitionName;return n||(o?{motionName:"".concat(t,"-").concat(o)}:i?{motionName:i}:null)}function D(e){return e&&e.motionName}const Z=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).state={targetWidth:void 0,targetHeight:void 0,status:null,prevVisible:null,alignClassName:null,inMotion:!1},e.popupRef=p().createRef(),e.alignRef=p().createRef(),e.nextFrameState=null,e.nextFrameId=null,e.onAlign=function(t,n){var o=e.state.status,i=e.props,a=i.getClassNameFromAlign,s=i.onAlign,r=a(n);"align"===o?e.setState({alignClassName:r,status:"aligned"},(function(){e.alignRef.current.forceAlign()})):"aligned"===o?(e.setState({alignClassName:r,status:"afterAlign"}),s(t,n)):e.setState({alignClassName:r})},e.onMotionEnd=function(){var t=e.props.visible;e.setState({status:t?"AfterMotion":"stable",inMotion:!1})},e.setStateOnNextFrame=function(t){e.cancelFrameState(),e.nextFrameState=(0,o.Z)((0,o.Z)({},e.nextFrameState),t),e.nextFrameId=T()((function(){var t=(0,o.Z)({},e.nextFrameState);e.nextFrameState=null,e.setState(t)}))},e.getMotion=function(){return(0,o.Z)({},P(e.props))},e.getAlignTarget=function(){var t=e.props,n=t.point,o=t.getRootDomNode;return n||o},e.cancelFrameState=function(){T().cancel(e.nextFrameId)},e.renderPopupElement=function(){var t=e.state,n=t.status,i=t.targetHeight,a=t.targetWidth,s=t.alignClassName,r=e.props,u=r.prefixCls,l=r.className,c=r.style,d=r.stretch,f=r.visible,m=r.align,h=r.destroyPopupOnHide,g=r.onMouseEnter,y=r.onMouseLeave,M=r.onMouseDown,E=r.onTouchStart,b=r.children,T=k()(u,l,s),S="".concat(u,"-hidden"),P={};d&&(-1!==d.indexOf("height")?P.height=i:-1!==d.indexOf("minHeight")&&(P.minHeight=i),-1!==d.indexOf("width")?P.width=a:-1!==d.indexOf("minWidth")&&(P.minWidth=a));var D=(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},P),e.getZIndexStyle()),c),{},{opacity:"stable"!==n&&f?0:void 0,pointerEvents:"stable"!==n&&f?"none":void 0}),Z=e.getMotion(),A=f;f&&"beforeMotion"!==n&&"motion"!==n&&"stable"!==n&&(Z.motionAppear=!1,Z.motionEnter=!1,Z.motionLeave=!1),"afterAlign"!==n&&"beforeMotion"!==n||(A=!1),["onEnterStart","onAppearStart","onLeaveStart"].forEach((function(t){var n=null==Z?void 0:Z[t];Z[t]=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];null==n||n.apply(void 0,o),e.setState({inMotion:!0})}}));var O=!f||"align"!==n&&"aligned"!==n&&"stable"!==n,N=!0;return"stable"===n&&(N=f),h&&!N?null:p().createElement(w.Z,Object.assign({visible:A},Z,{removeOnLeave:!1,onEnterEnd:e.onMotionEnd,onLeaveEnd:e.onMotionEnd,leavedClassName:S}),(function(t,n){var i=t.style,a=t.className;return p().createElement(C.Z,{target:e.getAlignTarget(),key:"popup",ref:e.alignRef,monitorWindowResize:!0,disabled:O,align:m,onAlign:e.onAlign},p().createElement(x,{prefixCls:u,className:k()(T,a),ref:(0,v.sQ)(n,e.popupRef),onMouseEnter:g,onMouseLeave:y,onMouseDown:M,onTouchStart:E,style:(0,o.Z)((0,o.Z)({},D),i)},b))}))},e.renderMaskElement=function(){var t=e.props,n=t.mask,i=t.maskMotion,a=t.maskTransitionName,s=t.maskAnimation,r=t.prefixCls,u=t.visible;if(!n)return null;var l={};return i&&i.motionName&&(l=(0,o.Z)({motionAppear:!0},P({motion:i,prefixCls:r,transitionName:a,animation:s}))),p().createElement(w.Z,Object.assign({},l,{visible:u,removeOnLeave:!0}),(function(t){var n=t.className;return p().createElement("div",{style:e.getZIndexStyle(),key:"mask",className:k()("".concat(r,"-mask"),n)})}))},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=this.state.status,t=this.props,n=t.getRootDomNode,o=t.visible,i=t.stretch;if(this.cancelFrameState(),o&&"stable"!==e)switch(e){case null:this.setStateOnNextFrame({status:i?"measure":"align"});break;case"afterAlign":this.setStateOnNextFrame({status:D(this.getMotion())?"beforeMotion":"stable"});break;case"AfterMotion":this.setStateOnNextFrame({status:"stable"});break;default:var a=["measure","align",null,"beforeMotion","motion"],s=a.indexOf(e),r=a[s+1];-1!==s&&r&&this.setStateOnNextFrame({status:r})}if("measure"===e){var u=n();u&&this.setStateOnNextFrame({targetHeight:u.offsetHeight,targetWidth:u.offsetWidth})}}},{key:"componentWillUnmount",value:function(){this.cancelFrameState()}},{key:"getZIndexStyle",value:function(){return{zIndex:this.props.zIndex}}},{key:"render",value:function(){return p().createElement("div",null,this.renderMaskElement(),this.renderPopupElement())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.visible,o=(0,E.Z)(e,["visible"]),i=t.prevVisible,a=t.status,s=t.inMotion,r={prevVisible:n,status:a},u=P(o);return null===i&&!1===n?(r.status="stable",r.inMotion=!1):n!==i&&(r.inMotion=!1,n||D(u)&&s?r.status=null:r.status="stable",n&&(r.alignClassName=null)),r}}]),n}(l.Component),A=l.createContext(null);function O(){}var N=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const L=(R=g.Z,(H=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o,a;return(0,i.Z)(this,n),(o=t.call(this,e)).popupRef=p().createRef(),o.triggerRef=p().createRef(),o.onMouseEnter=function(e){var t=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",e),o.delaySetPopupVisible(!0,t,t?null:e)},o.onMouseMove=function(e){o.fireEvents("onMouseMove",e),o.setPoint(e)},o.onMouseLeave=function(e){o.fireEvents("onMouseLeave",e),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onPopupMouseEnter=function(){o.clearDelayTimer()},o.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&o.popupRef.current&&o.popupRef.current.popupRef.current&&(0,f.Z)(o.popupRef.current.popupRef.current,e.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onFocus=function(e){o.fireEvents("onFocus",e),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))},o.onMouseDown=function(e){o.fireEvents("onMouseDown",e),o.preClickTime=Date.now()},o.onTouchStart=function(e){o.fireEvents("onTouchStart",e),o.preTouchTime=Date.now()},o.onBlur=function(e){o.fireEvents("onBlur",e),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)},o.onContextMenu=function(e){e.preventDefault(),o.fireEvents("onContextMenu",e),o.setPopupVisible(!0,e)},o.onContextMenuClose=function(){o.isContextMenuToShow()&&o.close()},o.onClick=function(e){if(o.fireEvents("onClick",e),o.focusTime){var t;if(o.preClickTime&&o.preTouchTime?t=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?t=o.preClickTime:o.preTouchTime&&(t=o.preTouchTime),Math.abs(t-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!o.state.popupVisible;(o.isClickToHide()&&!n||n&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,e)},o.onPopupMouseDown=function(){var e;o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout((function(){o.hasPopupMouseDown=!1}),0),o.context&&(e=o.context).onPopupMouseDown.apply(e,arguments)},o.onDocumentClick=function(e){if(!o.props.mask||o.props.maskClosable){var t=e.target,n=o.getRootDomNode(),i=o.getPopupDomNode();(0,f.Z)(n,t)||(0,f.Z)(i,t)||o.hasPopupMouseDown||o.close()}},o.getRootDomNode=function(){var e=o.props.getTriggerDOMNode;if(e)return e(o.triggerRef.current);try{var t=(0,m.Z)(o.triggerRef.current);if(t)return t}catch(e){}return d().findDOMNode((0,s.Z)(o))},o.getPopupClassNameFromAlign=function(e){var t=[],n=o.props,i=n.popupPlacement,a=n.builtinPlacements,s=n.prefixCls,r=n.alignPoint,u=n.getPopupClassNameFromAlign;return i&&a&&t.push(function(e,t,n,o){for(var i=n.points,a=Object.keys(e),s=0;s<a.length;s+=1){var r=a[s];if(M(e[r].points,i,o))return"".concat(t,"-placement-").concat(r)}return""}(a,s,e,r)),u&&t.push(u(e)),t.join(" ")},o.getComponent=function(){var e=o.props,t=e.prefixCls,n=e.destroyPopupOnHide,i=e.popupClassName,a=e.onPopupAlign,s=e.popupMotion,r=e.popupAnimation,u=e.popupTransitionName,l=e.popupStyle,c=e.mask,d=e.maskAnimation,f=e.maskTransitionName,m=e.maskMotion,v=e.zIndex,h=e.popup,g=e.stretch,y=e.alignPoint,k=o.state,M=k.popupVisible,E=k.point,b=o.getPopupAlign(),T={};return o.isMouseEnterToShow()&&(T.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(T.onMouseLeave=o.onPopupMouseLeave),T.onMouseDown=o.onPopupMouseDown,T.onTouchStart=o.onPopupMouseDown,p().createElement(Z,Object.assign({prefixCls:t,destroyPopupOnHide:n,visible:M,point:y&&E,className:i,align:b,onAlign:a,animation:r,getClassNameFromAlign:o.getPopupClassNameFromAlign},T,{stretch:g,getRootDomNode:o.getRootDomNode,style:l,mask:c,zIndex:v,transitionName:u,maskAnimation:d,maskTransitionName:f,maskMotion:m,ref:o.popupRef,motion:s}),"function"==typeof h?h():h)},o.getContainer=function(){var e=(0,s.Z)(o).props,t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",(e.getPopupContainer?e.getPopupContainer(o.getRootDomNode()):e.getDocument().body).appendChild(t),t},o.setPoint=function(e){o.props.alignPoint&&e&&o.setState({point:{pageX:e.pageX,pageY:e.pageY}})},o.handlePortalUpdate=function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)},a="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,o.state={prevPopupVisible:a,popupVisible:a},N.forEach((function(e){o["fire".concat(e)]=function(t){o.fireEvents(e,t)}})),o}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(),this.clickOutsideHandler=(0,h.Z)(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(),this.touchOutsideHandler=(0,h.Z)(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(),this.contextMenuOutsideHandler1=(0,h.Z)(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=(0,h.Z)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)}},{key:"getPopupDomNode",value:function(){return this.popupRef.current&&this.popupRef.current.popupRef.current?this.popupRef.current.popupRef.current:null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,i=e.builtinPlacements;return t&&i?function(e,t,n){var i=e[t]||{};return(0,o.Z)((0,o.Z)({},i),n)}(i,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,o=this.state.popupVisible;this.clearDelayTimer(),o!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:o}),this.props.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var o=this,i=1e3*t;if(this.clearDelayTimer(),i){var a=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){o.setPopupVisible(e,a),o.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){this.state.popupVisible&&this.popupRef.current&&this.popupRef.current.alignRef.current&&this.popupRef.current.alignRef.current.forceAlign()}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var o=this.props[e];o&&o(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,i=t.forceRender,a=t.alignPoint,s=t.className,r=t.autoDestroy,u=p().Children.only(n),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,a&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var c=k()(u&&u.props&&u.props.className,s);c&&(l.className=c);var d=(0,o.Z)({},l);(0,v.Yr)(u)&&(d.ref=(0,v.sQ)(this.triggerRef,u.ref));var f,m=p().cloneElement(u,d);return(e||this.popupRef.current||i)&&(f=p().createElement(R,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&r&&(f=null),p().createElement(A.Provider,{value:{onPopupMouseDown:this.onPopupMouseDown}},m,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,o={};return void 0!==n&&t.popupVisible!==n&&(o.popupVisible=n,o.prevPopupVisible=t.popupVisible),o}}]),n}(p().Component)).contextType=A,H.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:O,afterPopupVisibleChange:O,onPopupAlign:O,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},H);var R,H}}]);